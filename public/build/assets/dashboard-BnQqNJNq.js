import"./bootstrap-T1DpEqax.js";function a(d,s){const t=document.getElementById(d);if(t){if(t.innerHTML="",!s.length){const o=document.createElement("tr"),r=document.createElement("td");r.colSpan=t.parentElement.querySelectorAll("th").length,r.classList.add("text-center"),r.textContent="No records",o.appendChild(r),t.appendChild(o);return}s.forEach(o=>t.appendChild(o))}}async function c(){try{const d=window.location.search,t=(await axios.get(`/dashboard/data${d}`)).data;if(t.tickets&&t.tickets.data){const r=t.tickets.data.map(e=>{const n=document.createElement("tr");return n.innerHTML=`<td>${e.formatted_subject}</td><td>${e.status.charAt(0).toUpperCase()+e.status.slice(1)}</td><td>${e.due_at?e.due_at.substring(0,10):""}</td>`,n});a("tickets-body",r)}if(t.jobOrders&&t.jobOrders.data){const r=t.jobOrders.data.map(e=>{const n=document.createElement("tr");return n.innerHTML=`<td>${e.job_type}</td><td>${e.description.slice(0,50)}</td><td>${e.status.charAt(0).toUpperCase()+e.status.slice(1)}</td>`,n});a("job-orders-body",r)}if(t.requisitions&&t.requisitions.data){const r=t.requisitions.data.map(e=>{const n=document.createElement("tr");return n.innerHTML=`<td>${e.purpose.slice(0,50)}</td><td>${e.status.replace("_"," ")}</td>`,n});a("requisitions-body",r)}if(t.purchaseOrders&&t.purchaseOrders.data){const r=t.purchaseOrders.data.map(e=>{const n=document.createElement("tr");return n.innerHTML=`<td>${e.item}</td><td>${e.quantity}</td><td>${e.status.charAt(0).toUpperCase()+e.status.slice(1)}</td>`,n});a("purchase-orders-body",r)}if(t.incomingDocuments&&t.incomingDocuments.data){const r=t.incomingDocuments.data.map(e=>{const n=document.createElement("tr");return n.innerHTML=`<td>${e.document.title}</td><td>${e.user.name}</td>`,n});a("incoming-docs-body",r)}if(t.outgoingDocuments&&t.outgoingDocuments.data){const r=t.outgoingDocuments.data.map(e=>{const n=document.createElement("tr");return n.innerHTML=`<td>${e.document.title}</td><td>${e.user.name}</td>`,n});a("outgoing-docs-body",r)}if(t.forApprovalDocuments&&t.forApprovalDocuments.data){const r=t.forApprovalDocuments.data.map(e=>{const n=document.createElement("tr");return n.innerHTML=`<td>${e.document.title}</td><td>${e.user.name}</td>`,n});a("for-approval-body",r)}const o=document.getElementById("dashboard-status");o&&(o.textContent="Dashboard updated")}catch(d){console.error(d)}}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("tickets-table")&&(c(),setInterval(c,3e5))});
