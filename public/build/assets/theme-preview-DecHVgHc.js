const s=document.getElementById("color_primary"),i=document.getElementById("color_accent"),f=document.getElementById("font_primary"),v=document.getElementById("font_secondary"),I=document.getElementById("home_heading"),w=document.getElementById("home_tagline"),t=document.getElementById("theme-preview"),u=t?t.querySelector(".preview-heading"):null,d=t?t.querySelector(".preview-tagline"):null,m=document.getElementById("primary_color_preview"),y=document.getElementById("accent_color_preview"),c=document.getElementById("contrast_warning");function p(e){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}function g({r:e,g:n,b:a}){const o=[e,n,a].map(l=>{const r=l/255;return r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)});return .2126*o[0]+.7152*o[1]+.0722*o[2]}function E(e,n){const a=p(e),o=p(n);if(!a||!o)return 1;const l=g(a),r=g(o);return(Math.max(l,r)+.05)/(Math.min(l,r)+.05)}function h(){if(!t)return;t.style.setProperty("--color-primary",s.value),t.style.setProperty("--color-accent",i.value),t.style.setProperty("--font-primary",f.value),t.style.setProperty("--font-secondary",v.value),u&&(u.textContent=I.value),d&&(d.textContent=w.value),m&&(m.style.background=s.value),y&&(y.style.background=i.value);const e=E(s.value,i.value);c&&(e<4.5?(c.textContent=`Low contrast: ${e.toFixed(2)}:1. WCAG AA recommends at least 4.5:1.`,c.classList.remove("d-none")):(c.textContent="",c.classList.add("d-none")))}[s,i,f,v,I,w].forEach(e=>{e&&e.addEventListener("input",h)});h();
