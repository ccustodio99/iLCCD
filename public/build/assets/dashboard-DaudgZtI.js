import"./bootstrap-T1DpEqax.js";function p(r){const s=document.createElement("div");return s.innerHTML=r??"",s.textContent||""}function o(r){const s=document.createElement("td");return s.textContent=p(r),s}function c(r,s){const e=document.getElementById(r);if(e){if(e.innerHTML="",!s.length){const d=document.createElement("tr"),a=document.createElement("td");a.colSpan=e.parentElement.querySelectorAll("th").length,a.classList.add("text-center"),a.textContent="No records",d.appendChild(a),e.appendChild(d);return}s.forEach(d=>e.appendChild(d))}}async function i(){try{const r=window.location.search,e=(await axios.get(`/dashboard/data${r}`)).data;if(e.tickets&&e.tickets.data){const a=e.tickets.data.map(n=>{const t=document.createElement("tr");return t.appendChild(o(n.formatted_subject)),t.appendChild(o(n.status.charAt(0).toUpperCase()+n.status.slice(1))),t.appendChild(o(n.due_at?n.due_at.substring(0,10):"")),t});c("tickets-body",a)}if(e.jobOrders&&e.jobOrders.data){const a=e.jobOrders.data.map(n=>{const t=document.createElement("tr");return t.appendChild(o(n.job_type)),t.appendChild(o(n.description.slice(0,50))),t.appendChild(o(n.status.charAt(0).toUpperCase()+n.status.slice(1))),t});c("job-orders-body",a)}if(e.requisitions&&e.requisitions.data){const a=e.requisitions.data.map(n=>{const t=document.createElement("tr");return t.appendChild(o(n.purpose.slice(0,50))),t.appendChild(o(n.status.replace("_"," "))),t});c("requisitions-body",a)}if(e.purchaseOrders&&e.purchaseOrders.data){const a=e.purchaseOrders.data.map(n=>{const t=document.createElement("tr");return t.appendChild(o(n.item)),t.appendChild(o(n.quantity)),t.appendChild(o(n.status.charAt(0).toUpperCase()+n.status.slice(1))),t});c("purchase-orders-body",a)}if(e.incomingDocuments&&e.incomingDocuments.data){const a=e.incomingDocuments.data.map(n=>{const t=document.createElement("tr");return t.appendChild(o(n.document.title)),t.appendChild(o(n.user.name)),t});c("incoming-docs-body",a)}if(e.outgoingDocuments&&e.outgoingDocuments.data){const a=e.outgoingDocuments.data.map(n=>{const t=document.createElement("tr");return t.appendChild(o(n.document.title)),t.appendChild(o(n.user.name)),t});c("outgoing-docs-body",a)}if(e.forApprovalDocuments&&e.forApprovalDocuments.data){const a=e.forApprovalDocuments.data.map(n=>{const t=document.createElement("tr");return t.appendChild(o(n.document.title)),t.appendChild(o(n.user.name)),t});c("for-approval-body",a)}const d=document.getElementById("dashboard-status");d&&(d.textContent="Dashboard updated")}catch(r){console.error(r)}}(function(){document.getElementById("tickets-table")&&(i(),setInterval(i,3e5))})();
