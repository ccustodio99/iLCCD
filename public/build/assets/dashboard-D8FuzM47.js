import"./bootstrap-T1DpEqax.js";function d(s,e){const o=document.getElementById(s);if(o){if(o.innerHTML="",!e.length){const r=document.createElement("tr"),t=document.createElement("td");t.colSpan=o.parentElement.querySelectorAll("th").length,t.classList.add("text-center"),t.textContent="No records",r.appendChild(t),o.appendChild(r);return}e.forEach(r=>o.appendChild(r))}}async function a(){try{const e=(await axios.get("/dashboard/data")).data;if(e.tickets&&e.tickets.data){const r=e.tickets.data.map(t=>{const n=document.createElement("tr");return n.innerHTML=`<td>${t.formatted_subject}</td><td>${t.status.charAt(0).toUpperCase()+t.status.slice(1)}</td><td>${t.due_at?t.due_at.substring(0,10):""}</td>`,n});d("tickets-body",r)}if(e.jobOrders&&e.jobOrders.data){const r=e.jobOrders.data.map(t=>{const n=document.createElement("tr");return n.innerHTML=`<td>${t.job_type}</td><td>${t.description.slice(0,50)}</td><td>${t.status.charAt(0).toUpperCase()+t.status.slice(1)}</td>`,n});d("job-orders-body",r)}if(e.requisitions&&e.requisitions.data){const r=e.requisitions.data.map(t=>{const n=document.createElement("tr");return n.innerHTML=`<td>${t.purpose.slice(0,50)}</td><td>${t.status.replace("_"," ")}</td>`,n});d("requisitions-body",r)}if(e.purchaseOrders&&e.purchaseOrders.data){const r=e.purchaseOrders.data.map(t=>{const n=document.createElement("tr");return n.innerHTML=`<td>${t.item}</td><td>${t.quantity}</td><td>${t.status.charAt(0).toUpperCase()+t.status.slice(1)}</td>`,n});d("purchase-orders-body",r)}if(e.incomingDocuments&&e.incomingDocuments.data){const r=e.incomingDocuments.data.map(t=>{const n=document.createElement("tr");return n.innerHTML=`<td>${t.document.title}</td><td>${t.user.name}</td>`,n});d("incoming-docs-body",r)}if(e.outgoingDocuments&&e.outgoingDocuments.data){const r=e.outgoingDocuments.data.map(t=>{const n=document.createElement("tr");return n.innerHTML=`<td>${t.document.title}</td><td>${t.user.name}</td>`,n});d("outgoing-docs-body",r)}if(e.forApprovalDocuments&&e.forApprovalDocuments.data){const r=e.forApprovalDocuments.data.map(t=>{const n=document.createElement("tr");return n.innerHTML=`<td>${t.document.title}</td><td>${t.user.name}</td>`,n});d("for-approval-body",r)}const o=document.getElementById("dashboard-status");o&&(o.textContent="Dashboard updated")}catch(s){console.error(s)}}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("tickets-table")&&(a(),setInterval(a,3e5))});
